Άσκηση 1
Παναγιώτα Γύφτου , Α.Μ. 1115201900318

1.Οι εντολές μεταγλώττισης του προγράμματος βρίσκονται στο αρχείο Makefile, δηλαδή η μεταγλώττιση γίνεται με το make.
2. Και τρέχω το πρόγραμμα: ./main 5 10 5 4
   (δηλ. NMax=5 L=10 K1=5 K2=4)

3.
-Επιλογές κλάσεων:
Έχω 5 κλάσεις.Την κλάση Bookcase,την Shelf, την Cabinet, την Base και την  Book.Το πρόβλημα κινείται γύρω από αυτές τις κλάσεις.Η κλάση Shelf περιέχει στο σύνολο της 5 αντικείμενα (ράφια) που έχουν ακριβώς την ίδια συμπεριφορά, τα 2 εκ΄των οποίων βρίσκονται στο ντουλάπι.Η κλάση Book περιέχει στο σύνολο της 5*ΝMax+L αντικείμενα βιβλία, δηλαδή το 5*ΝMax είναι τα βιβλία που δημιουργούνται για όλες τις θέσεις των 5 ραφιών (στην αρχή για να δείξουμε ότι δεν έχουμε βιβλία βάζω με NULL τον τίτλο και τον συγγραφέα και το ISBN ίσο με -1) .Τέλος η κλάση Bookcase,Cabinet και Base στο σύνολο τους έχουν ένα αντικείμενο. Επομένως για την δόμηση της βιβλιοθήκης χρειάζονται αυτές οι 5 κλάσεις.

-Επιλογές ορατότητας μελών κλάσεων:
Στον private χώρο των κλάσεων Bookcase, Shelf, Cabinet, Base και Book έχω βάλει δεδομένα που χαρακτηρίζουν το/τα αντικείμενο/α.Για παράδειγμα:
  > Η κλάση Bookcase περιέχει μια μεταβλητή N που λειτουργεί ως μετρητή και αντιπροσωπεύει το πλήθος των βιβλίων που βρίσκονται συνολικά στην βιβλιοθήκη.Τα      πιό σημαντικά της δεδομένα στον private χώρο που συμβάλλουν στην επικοινωνία με τα υπόλοιπα αντικείμενα που περιλαμβάνονται στην δόμηση της είναι οι          δείκτες σε άλλες κλάσεις.Πιο συγκεκριμένα η κλάση Bookcase έχει ένα δείκτη σε πίνακα τύπου κλάσης Shelf (class Shelf **shelf_array) , ακόμη έναν δείκτη      που δείχνει σε ένα αντικείμενο της κλάσης Cabinet (class Cabinet *cabinet) και έναν δείκτη που δείχνει σε ένα αντικείμενο της κλάσης Base 
    (class Base *base).
  > Στην κλάση Shelf η βασική μεταβλητή που την χαρακτηρίζει  είναι η NMax, η οποία έχει το μέγιστο πλήθος θέσεων κάθε ραφιού.Η μεταβλητή current_capacity       και ο πίνακας ακεραίων reserved_table είναι στοιχεία που χρησιμοποιεί για να κάνει τις διάφορες λειτουργίες για την ολοκλήρωση των δουλειών που της          ζητήθηκαν μέσω των συναρτήσεων της από κάποιες άλλες κλάσεις ή και δικών της διεργασιών.Ένα σημαντικό δεδομένο που βρίσκεται στον ιδιωτικό της χώρο     είναι ο δείκτης σε πίνακα τύπου κλάσης Book (class Book **book_array), αυτό δείχνει την σύνδεση των δύων κλάσεων.
  > Η κλάση Cabinet περιέχει έναν δείκτη σε πίνακα τύπου κλάσης Shelf (class Shelf **shelf_array), αυτό πάλι δείχνει την σύνδεση των δύων κλάσεων.
  > Η κλάση Book περιέχει δεδομένα τα οποία την χαρακτηρίζουν και είναι η ακέραια μεταβλητή ISBN, και 2 συμβολοσειρές, η 1η για το όνομα του συγγραφέα και η     2η για τον τίτλο του βιβλίου.
  > Η κλάση Base δεν έχει ιδιωτικό χώρο, γενικά η ύπαρξη αυτής της κλάσης είναι μόνο για την δόμηση της βιβλιοθήκης, δεν συμβάλλει σε κάποια άλλη λειτουργία.

Στο δημόσιο κομμάτι των κλάσεων εκτός από της συναρτήσεις κατασκευής/καταστροφής έχουμε συναρτήσεις οι οποίες χρησιμοποιούνται για την εκπλήρωση αιτημάτων που δέχονται είτε από κάποιο αντικείμενο άλλης κλάσης είτε από τον χρήστη, αλλά και την επιτευξη διεργασιών της ίδιας της κλάσης, δηλαδή συναρτήσεις της ίδιας κλάσης συνεργάζονται.Στο πρόβλημα μας κάποιες συναρτήσεις των κλάσεων Bookcase και Book καλούνται από τον χρήστη για την εκπλήρωση αιτημάτων του.Ο χρήστης έρχεται σε επαφή με την Book για την δημιουργία βιβλίων και με την κλάση Bookcase  για την τοποθέτηση, αφαίρεση και εκτύπωση.


-Περιγραφή Προγράμματος:

**Δημιουργίας Βιβλιοθήκης**
Αρχικά καλώ την συνάρτηση κατασκευής της κλάσης Bookcase.Η συνάρτηση δημιουργεί αρχικά 3 αντικείμενα που έχουν την ίδια ακριβώς συμπεριφορά και υπάγονται στην κλάση Shelf.Κατά την διάρκεια δημιουργίας των 3 ραφιών αρχικοποιώ ταυτόχρονα το πλήθος των δεσμευμένων θέσεων ίσο με 0.Η συνάρτηση κατασκευής της κλάσης Shelf δημιουργεί σε κάθε δημιουργία ενός ραφιού NMax αντικείμενα ίδιας συμπεριφοράς που υπάγονται στην κλάση Book και ο constructor της Book  αρχικοποιεί τις μεταβλητές του που το πλαισιώνουν.Με την διέγερση της δημιουργίας των βιβλίων ταυτόχρονα δημιουργείται και αρχικοποιείται ένας πίνακας που λειτουργεί ως σημαφόρος των θέσεων αν είναι δεσμευμένες ή όχι.Όλες αρχικοποιούνται να είναι ελευθερες ( ο πίνακας είναι ο reserved_table) Ο constructor της βιβλιοθήκης μετά τα ράφια καλεί να δημιουργήσει το αντικείμενο ντουλάπι όπου αυτό με την σειρά του καλεί τον κατασκευαστή του ραφιού ώστε να δημιουργηθούν  τα 2 αντικείμενα ράφια (τα οποία έχουν την ίδια συμπεριφορά με τα υπόλοιπα 3, άρα ανήκουν στο ίδιο σύνολο δηλαδή στην κλάση Shelf).Η συνάρτηση κατασκευής του ραφιού περιγράφηκε παραπάνω.Τέλος ο constructor της βιβλιοθήκης δημιουργεί το αντικείμενο βάση, καλώντας την συνάρτηση κατασκευής του. 


**Δημιουργία L βιβλιων**
Αρχικά δημιουργώ έναν πίνακα τύπου κλάσης Book μεγέθους L.Σε αυτόν τον πίνακα θα αποθηκεύσω τα βιβλία που θα δημιουργηθούν.Με την κλήση της create_book φτιάχνουμε ένα νέο βιβλίο.


**Κ1 τυχαίες τοποθετήσεις βιβλίων** 
Τον πίνακα στο οποίον αποθήκευσα τα βιβλία που δημιούργησα, θα τον χρησιμοποιήσω ώστε να πάρω Κ1 βιβλία και να τα τοποθετήσω σε τυχαίες θέσεις στην βιβλιοθήκη.Τα βιβλία εισάγονται ένα-ένα.Η εισαγωγή των οποίων επιτυγχάνεται με την συνάρτηση bookcase.place_book, τα ορίσματα που της περνάω είναι ο τίτλος του βιβλίου, το όνομα του συγγραφέα και τον αριθμό ISBN, τα οποία μου επιστρέφονται από τις αντίστοιχες συναρτήσεις get_Title(),get_Author(),get_ISBN().
Αρχικά η συνάρτηση place_book με την rand()%5 λαμβάνει έναν τυχαίο αριθμό απο το 0 έως το 4 ,ο οποίος είναι ο αριθμός που δείχνει στον χώρο που θα τοποθετηθεί το βιβλίο ( η αρίθμηση μου ξεκινάει από το μηδέν αλλά την έχω διαμορφώσει κατάλληλα ώστε να είναι κατανοητή στον χρήστη).Αφού πάρει την τιμή εκτυπώνει την προσδιορισμένη θέση που επιλέχθηκε για την τοποθέτηση.Έπειτα ανάλογα με τον αριθμό προσδιοριστή πρέπει να τοποθετήσουμε το βιβλίο στον χώρο που πρέπει.Για να ξεχωρίσω τους δύο χώρους που ειναι τα εξωτερικά και τα εσωτερικά ράφια εκμεταλλεύομαι πάλι την αρίθμηση των ραφιών που μας έχει δώσει η εκφώνηση και λέω εάν ο αριθμός χώρου που έχει επιλεγεί είναι  μικρότερος ή ίσος του 2 (εγώ ξεκινάω την αρίθμηση από το 0)αναφέρομαι στον χώρο με τα εξωτερικά ράφια δηλαδή τους χώρου 1,2,3 αντίστοιχα σε εμένα είναι 0,1,2.Αλλιώς αν ο αριθμός προσδιοριστής είναι μεγαλύτερος του 2 αναφέρομαι στα εσωτερικά ράφια του ντουλαπιού.Η εκφώνηση ζητάει να προσδιορίσουμε τα εσωτερικά ράφια του ντουλαπιού με 1 και 2, επειδή η αρίθμηση μου είναι από το μηδέν έχω αντίστοιχα το 0 και το 1.Για να επιτευχθεί αυτό (αναφέρομαι στην περίπτωση που ο αριθμός προσδιοριστής > 2) κάνω την πράξη (αριθμός προσδιοριστής)-3.Αν πχ 
αριθμός προσδιοριστής=3 τότε (αριθμός προσδιοριστής)-3=3-3=0, δηλ. αναφέρομαι στο πάνω ράφι του ντουλαπιού.Και στις δύο περιπτώσεις αντιμετωπίζω την τοποθέτηση με την ίδια διαδικασία απλώς για τα εσωτερικά ράφια καλώ το ντουλάπι και απο κεί προσδιορίζω το ράφι(0 ή 1).Το πρώτο πράγμα που κάνω είναι να ελέγξω αν υπάρχει κενός χώρος στο ράφι μέσω της συνάρτησης free_space.Αν η τιμή επιστροφής είναι 1 ή 2 (1->εντελώς άδειο ράφι, 2-> έχει τοποθετημένα βιβλία αλλά έχει κενές θέσεις) τότε μπορείς να συνεχίσεις την διαδικασία τοποθέτησης του βιβλίου.Το πρώτο βήμα είναι να αυξήσω τον μετρητή που μετράει το πλήθος των δεσμευμένων θέσεων, μέσω της συνάρτησης set_data με όρισμα 1.Έπειτα με την συνάρτηση get_maxN η συνάσρτηση place_book ενημερώνεται για το πλήθος των θέσεων του ραφιού ,ώστε να αναζητήσει μια μια τις θέσεις.Η πρώτη ελεύθερη θέση που θα βρεθεί με την βοήθεια της συνάρτησης reservation_table (η οποία θα επιστρέψει -1 αν είναι η τρέχουσα θέση ελεύθερη) την επιλέγουμε.Έπειτα μέσω της συνάρτησης seat_reservation δεσμεύουμε την θέση που επιλέξαμε να τοποθετήσουμε το βιβλίο, στον πίνακα που χρησιμοποιείται σαν σημαφόρος των θέσεων.Μετά αυξάνουμε τον αριθμό των βιβλίων που βρίσκονται στην βιβλιοθήκη κατά ένα.Εκτυπώνουμε το πλήθος των βιβλίων που βρίσκεται στην βιβλιοθήκη.Έπειτα με την συνάρτηση set_book παιρνάμε τα στοιχεία του βιβλίου στον χώρο που επιλέξαμε.Τέλος εκτυπώνουμε τα περιεχόμενα του τρέχοντος ραφιού.Αν σε κάποια θέση δεν υπάρχει βιβλίο εκτυπώνω το μύνημα Empty Position.Αλλιώς αν η συνάρτηση
free_space επιστρέψει 0 σημαίνει ότι δεν υπάρχει χώρος για τοποθέτηση (επειδή το ράφι είναι γεμάτο) και επιστρέφει false ώστε να εκτυπωθεί το κατάλληλο μήνυμα για να ενημερώσει τον χρήστη ότι δεν ήταν εφικτή η τοποθέτηση του βιβλίου.


**Κ2 τυχαίες αφαιρέσεις βιβλίων** 
Οι αφαιρέσεις των βιβλίων επιτυγχάνονται μέσω της bookcase.take_book. Οι αφαιρέσεις των βιβλίων γίνεται μία-μία.Η υλοποίηση της συνάρτησης είναι σχεδόν ίδια με αυτή της τοποθέτησης των βιβλίων με κάποιες διαφορές.Πάλι με την rand()%5 παίρνουμε έναν τυχαίο αριθμό απο το 0 έως το 4 ,ο οποίος είναι ο αριθμός που δείχνει στον χώρο που θα αφαιρεθεί το βιβλίο.Έπειτα εκτυπώνει τον χώρο που επιλέχθηκε.Γίνεται ο ξεχωρισμός των χώρων εξωτερικά και εσωτερικά ράφια με τον ίδιο τρόπο όπως και στη place_book ακόμη και ο προσδιορισμός.Το πρώτο πράγμα που ελέγχει η συνάρτηση με την free_space είναι αν το ράφι δεν είναι άδειο,ώστε να μπορέσει να αφαιρέσει βιβλίο.Καλούμε πάλι την set_data αλλά αυτή την φορά με όρισμα -1 ώστε η πρόσθεση που γίνεται στην set_data να μετατραπεί σε αφαίρεση, δηλαδή μειώνουμε το πλήθος θέσεων που είναι δεσμευμένο στο ράφι.Έπειτα με την συνάρτηση get_maxN παίρνουμε το πλήθος των θέσεων του ραφιού ,ώστε να αναζητήσει η συνάρτηση take_book μια μια τις θέσεις.Η πρώτη δεσμευμένη θέση που θα βρεθεί με την βοήθεια της συνάρτησης reservation_table (η οποία θα επιστρέψει 1 αν είναι η τρέχουσα θέση δεσμευμένη) την επιλέγουμε και μέσω της seat_reservation αποδεσμεύουμε την τρέχουσα θέση.Μετά μειώνουμε το πλήθος των βιβλίων που βρίσκονατι στην βιβλιοθήκη και το εκτυπώνουμε.Στην συνέχεια με την βοήθεια της remove_book διαγράφουμε τα στοιχεία του βιβλίου.Τέλος εκτυπώνουμε το τρέχων ράφι στο οποίο έγινε η αφαίρεση.Αλλιώς αν η συνάρτηση free_space επιστρέψει 1 σημαίνει ότι το ράφι είναι κενό και επιστρέφει false ώστε να εκτυπωθεί το κατάλληλο μύνημα για να ενημερώσει τον χρήστη ότι δεν ήταν εφικτή η αφαίρεση του βιβλίου.


**Εκτύπωση Βιβλιοθήκης**
Η εκτύπωση της βιβλιοθήκης επιτυγχάνεται μέσω της bookcase.print().Η συνάρτηση αρχικά καλεί 3 φορές την συνάρτηση print_shelf για να εκτυπώσω τα περιεχόμενα του ραφιού.Τέλος καλεί 2 φορές την print_cabinet
 --Η print_shelf εκτυπώνει ποιό ράφι εκτυπώνεται πχ το πάνω ράφι, μετά ελέγχει μέσω της get_empty αν το ράφι είναι κενο αν ναι εκτυπώνει το μήνυμα "Empty      Shelf" αλλιώς καλεί την print_book_array και αν στην τρέχουσα θέση είναι τοποθετημένο βιβλιο εκτυπώνει τις πληροφορίες αλλιώς εκτυπώνει το μήνυμα "Empty     Position".
 --Η print_cabinet εκτυπώνει ποιό ράφι εκτυπώνεται πχ το πάνω ράφι ντουλαπιού μετά ελέγχει μέσω της get_empty αν το ράφι είναι κενο αν ναι εκτυπώνει το      μήνυμα "Empty Shelf" αλλιώς καλεί την print_book_array και αν στην τρέχουσα θέση είναι τοποθετημένο βιβλιο εκτυπώνει τις πληροφορίες αλλιώς εκτυπώνει το     μήνυμα "Empty Position".

Μετά καταστρέφω τον πίνακα στον οποίο αποθήκευα τα βιβλια που δημιουργούνταν.
Στο τέλος καλούνται αυτόματα οι destructors για την καταστροφή των αντικειμένων.

